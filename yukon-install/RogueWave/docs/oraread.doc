
                             R O G U E   W A V E

            DBTools.h++ Access Library for the Oracle Call Interface (OCI)

                          Version 3.2.1 November 1999

Rogue Wave Software, Inc.
5500 Flatiron Parkway
Boulder, CO  80301

Corporate Office:  (303) 473-9118
Toll Free:  (800) 487-3217
Fax:  (303) 447-2568
sales@roguewave.com
www.roguewave.com

Technical Support:  (303) 545-3205
Online Knowledge Base:  support.roguewave.com
Email:  support@roguewave.com


Serving Europe:
Rogue Wave Software GmbH
+49-6103-59 34-0
Rogue Wave Software B.V.
+31-20-301 26 26
Rogue Wave Software S.A.R.L.
+33-1-4196 2626
Rogue Wave Software-UK.Ltd.
+44-118-988 0224
Rogue Wave Software S.R.L.
+39-02-3809 3288


This file contains:
-------------------
  1. Usage notes
  2. Compiler specific notes
  3. OS specific notes
  4. Oracle specific notes
  5. Known difficulties in this release
  6. Changes from previous release


======================================
1. Usage Notes:
--------------------------------------
a) Installation Notes for UNIX

**********************************************************************
Important note for Oracle installations where the Oracle RDBMS is 
mounted on a different directory than the OCI client:

The Oracle Access Library needs to be able to read OCI header files.
The OCI header files are installed as part of the Oracle RDBMS server
installation; not as part of the client library installation. If
your server was installed on a different directory than the OCI client it is 
neccessary to copy all OCI related header files from $ORACLE_SERVER/rdbms/demo, 
where $ORACLE_SERVER refers to the directory where the server is installed,
to the directory $ORACLE_CLIENT/rdbms/demo, where $ORACLE_CLIENT refers to the 
directory where the client library is installed.

**********************************************************************
Some versions of Oracle7 on UNIX were shipped without including the
"odessp" module.  This results in a unresolved reference when linking.
If this happens, there are two solutions:
  1) Get the latest upgrade of Oracle7; 7.0.16+
  2) Uncomment the line with RWDB_NO_ODESSP in the makefile,
     which disables stored procedures
**********************************************************************

===========================
2. Compiler-specific notes:
---------------------------

                      **********************
                  ****   Borland          ****
                     **********************

This access library is very sensitive to the order in which libraries are
linked.  Symbols in ociw32.lib are duplicated in import32.lib.  ociw32.lib
must appear first on the link line or dll builds will not work.


                     ************************
                  ****   HP aCC             ****
                     ************************
When using the HP aCC compiler, you may encounter a variety of compiler
warnings or "future errors" in your code, or very occasionally in ours. 
While porting our code, we encountered the warnings shown below.  

 * Warning 302: ... # The (...) parameter list is a non-portable feature.
   The compiler issues this warning when it encounters /usr/include/rpc/xdr.h,
   a header supplied by HP.
   
 * Warning 740: ... # The cast between 'DerivedClass &' and
   'BaseClass&' is performed as a 'reinterpret_cast'.  This operation
   is non-portable and potentially unsafe.
     This warning is generated by C-style casts in code like:
        return (BaseClass &)derivedClassReference;
     It is also generated by use of reinterpret_cast itself.
     You can turn off the warning by passing +W740 to the compiler.

 * Warning 749: ... # Another C-Style casting issue. The cast between
     'type1' and 'type2' is performed as a 'reinterpret_cast'. This
     operation is non-portable and potentially unsafe.


                     **********************
                  ****   Microsoft VC++   ****
                     **********************

                     **********************
                  ****  SparcWorks 4.0.0  ****
                     **********************
Applications which use class RWDBTPtrMemTable should be compiled with
the '+d' compiler switch. Failure to do so causes the application to
core dump.  We are still investigating this behavior.

=====================
3. OS-specific notes:
---------------------
                     ************************
                  ****    Windows 95       ****
                     ************************
Building the library via the GUI interface may fail. 

The problem can be worked around by:
1) Include the location of the MKS utilities in your path.
2) The resulting makefile can now be run from a DOS window with no failures.
 
                     ************************
                  ****     HP-UX  10.x     ****
                     ************************
The LPATH is only used when linking applications with shared libraries.
In order to use DBTools.h++ shared libraries, you need to set SHLIB_PATH
to include the location of the DBTools.h++ shared libraries and database
vendor libraries, and turn on link flag -Wl,+s.
 

                     **********************
                  ****   IBM/AIX          ****
                     **********************

 In order to use DBTools.h++'s Oracle (shared) access libraries, you will
 need to do or have done the following:

   (a) install PTF# U438748, which is an AIX patch for the pthreads library,
       and is available from IBM.
       
   (b) set LIBPATH to include the location of the DBtools.h++ shared
       libraries.

   (c) Single thread shared Oracle access library is not supported.  
       To build shared library, one must build it as multithreaded
       which uses xlC_r instead of xlC.

       Basically, xlC_r provides multithread support by linking with
       the appropriate linker switches and multithreaded version of
       libraries, e.g. libC_r.a. See /etc/xlC.cfg for the exact
       difference between xlC and xlC_r.

       Symptom: applications that fail with an error message similar
       to the following, should be rebuilt using xlC_r instead of xlC:

         Segmentation fault in reset_pthread_kill at 0xd05d76ec
         0xd05d76ec (reset_pthread_kill+0x38) 7c03292e  stwx  r0,r3,r5

       You may notice that when building the single-threaded version
       of the DBTools.h++ examples we use the xlC_r compiler.  This is
       because our examples link to the shared version of the Oracle
       client libraries and we must avoid the error described above.

       NB: Multi-threaded libraries are supported for AIX, however
       libraries and applications must be built with Tools.h++ 7.0.2
       or later.


                     **********************
                  ****     IRIX 6.5       ****
                     **********************
When building shared libraries on IRIX you may see Warning 85 at link time.
This warning is listed when two libraries that are being linked in contain
identical symbols.  The linker allows one definition to pre-empt the other.
These warnings do not affect the build or the use of the Oracle access
library.
 
 

=========================
4. Oracle specific notes:
-------------------------

                     **********************
                  ****   SQL Net 1 Users  ****
                     **********************
Applications that use SQL Net 1 can exit unexpectedly if connection
parameters are not specified correctly.  This is a limitation of SQL Net 1,
not DBTools.h++. See the Access Library Manuals for more information on
connection parameters.  The error message will be similar to
"Oracle Server exited with status 1"

                     **********************
                  **** Pro*C on Windows NT****
                     **********************
Applications created for Windows NT can experience failures if connection
parameters are not specified correctly.  Our testing has shown that this
is a problem with the OCI library shipped with Pro*C 1.6.4 for Windows NT.
Applications that sucessively try to connect with incorrect parameters
will experience a failure.

                     **********************
                  ****   Oralce 8 users   ****
                     **********************
Applications using static Oracle Access Library should also link to the 
following objects $(ORACLEHOME)/rdbms/lib/kpudfo.o $(ORACLEHOME)/rdbms/lib/ssdb
aed.o $(ORACLEHOME)/lib/nautab.o $(ORACLEHOME)/lib/naeet.o $(ORACLEHOME)/lib/nae
ct.o $(ORACLEHOME)/lib/naedhs.o.  Refer to the makefile for the examples for 
details.
                     
Oracle 803 client version of the shared library "libclntsh.so" available in 
$ORACLE_HOME/lib has some un-resolved symbols. Because of this, shared version 
of our oracle access library will not load and the program will exit.
This is an Oracle problem and the Oracle 804 client version fixes this 
problem. This is the recommended solution. Alternatively, if you do not intend 
to get Oracle 804 version, follow these steps to fix Oracle 803.

 1, Open up $ORACLE_HOME/bin/genclntsh script from your Oracle 803 
    installation.
 2, Comment out the line that reads "ar d $LIBCOMMON sorapt.o".
 3, Run genclntsh. For this to run successfully you need to have write 
    permission to your Oracle installation directory.
 4, Re-link our oracle access library with this new "libclntsh.so" library.

======================================
5. Known difficulties in this release:
--------------------------------------
As of the shipping date, the following were unresolved:

ID	Description
--      -----------
668	creating views with a select statement containing
	a function, SUM(), requires that the function has an
	associated alias.  This is not supported directly, but can be
	resolved by creating the view using rwdbName( <function> )
	or by suppling a schema, naming each column in the view.


=================================
6. Changes from previous release, not ducumented elsewhere:
---------------------------------
3.2.0 -> 3.2.1
  Maintenance release.
 
3.1.3 -> 3.1.4
  Maintenance release.
  With this version, the names of the database specific access library object modules to link 
  with your application when using static builds of the libraries have been changed as follows.

	On UNIX: old name: db<xx>lib.o		new name: rw<libtype><buildtype>.o
	On PC:	old name: db<xx>lib.obj		new name: rw<libtype><buildtype>.obj

	Where xx is the place holder for the first two characters of the access library's 
	<libtype> variable listed in the online DBTools.h++ Build Guide, section 2.2.2, 
	Table 6 "Possible values for <libtype>".

3.1.2 -> 3.1.3
3.1.1 -> 3.1.2
3.1.0 -> 3.1.1 (February 1999 CD Release)
--------------
  o general maintenance of access library. 

3.0.2 -> 3.1.0

  o general maintenance of access library. 

3.0.1 -> 3.0.2
3.0.0 -> 3.0.1

  o Fixed ORACLE access library performance problem caused by wrong mapping
    between INT and NUMBER.

2.2.1 -> 3.0.0
2.2.0 -> 2.2.1

November 1997
-------------

  o Shared libraries are now supported for OSF, DEC and IRIX platforms.

  o Failure of All OCI calls were not correctly refelected in RWDBStatus. Now
    it is fixed.

  o Fixed "FETCH OUT OF SEQUENCE" errors on Asynchronous connections.

  o Fixed problems fetching DATETIME data types. 

  o Fixed allignment warning errors on OSF and DEC platforms.

  o Fixed problems inserting spaces when using RWDBBoundExpr.

2.1.3 -> 2.2.0

August 1997 
--------------

  o Now close connection before call to ologof.

  o Eliminated warnings with  Borland 5.0.1 compiler.

  o Corrected improper use of opinit() function.

  o RWDBDatabase::dbTables() does no longer return SYSTEM tables as USER table.

  o In building shared libraries, we only link to libclntsh.sl

  o Avoid memory leak by postponing the creation of the RWDBResultImpl_.


#==========================================================================
#
#  Copyright (c) 1994-1999 Rogue Wave Software, Inc.  All Rights Reserved.
#
#  This computer software is owned by Rogue Wave Software, Inc. and is
#  protected by U.S. copyright laws and other laws and by international
#  treaties.  This computer software is furnished by Rogue Wave Software,
#  Inc. pursuant to a written license agreement and may be used, copied,
#  transmitted, and stored only in accordance with the terms of such
#  license and with the inclusion of the above copyright notice.  This
#  computer software or any other copies thereof may not be provided or
#  otherwise made available to any other person.
#
#  U.S. Government Restricted Rights.  This computer software is provided
#  with Restricted Rights.  Use, duplication, or disclosure by the
#  Government is subject to restrictions as set forth in subparagraph (c)
#  (1) (ii) of The Rights in Technical Data and Computer Software clause
#  at DFARS 252.227-7013 or subparagraphs (c) (1) and (2) of the
#  Commercial Computer Software – Restricted Rights at 48 CFR 52.227-19,
#  as applicable.  Manufacturer is Rogue Wave Software, Inc., 5500
#  Flatiron Parkway, Boulder, Colorado 80301 USA.
#
#==========================================================================
#
# $Id:
