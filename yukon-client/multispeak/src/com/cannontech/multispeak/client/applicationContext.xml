<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>

	<bean id="substationDaoTarget" class="com.cannontech.multispeak.dao.impl.SubstationDaoImpl">
		<property name="simpleJdbcTemplate"><ref bean="simpleJdbcTemplate" /></property>
		<property name="nextValueHelper"><ref bean="nextValueHelper" /></property>
	</bean>

	<bean id="substationDao" class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="target"><ref bean="substationDaoTarget" /></property>
		<property name="transactionManager"><ref bean="transactionManager" /></property>
		<property name="transactionAttributes">
			<props>
				<prop key="add">PROPAGATION_REQUIRED</prop>
				<prop key="remove">PROPAGATION_REQUIRED</prop>
				<prop key="update">PROPAGATION_REQUIRED</prop>
				<prop key="get*">PROPAGATION_SUPPORTS,readOnly</prop>
			</props>
		</property>
	</bean>
	
	<bean id="substationToRouteMappingDaoTarget" class="com.cannontech.multispeak.dao.impl.SubstationToRouteMappingDaoImpl">
		<property name="simpleJdbcTemplate"><ref bean="simpleJdbcTemplate"/></property>
	</bean>
	
	<bean id="substationToRouteMappingDao"
		class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="target">
			<ref bean="substationToRouteMappingDaoTarget" />
		</property>
		<property name="transactionManager">
			<ref bean="transactionManager" />
		</property>
		<property name="transactionAttributes">
			<props>
				<prop key="add">PROPAGATION_REQUIRED</prop>
				<prop key="remove*">PROPAGATION_REQUIRED</prop>
				<prop key="update">PROPAGATION_REQUIRED</prop>
				<prop key="get*">PROPAGATION_SUPPORTS,readOnly</prop>
			</props>
		</property>
	</bean>
	

  <bean id="mr_cbImpl" class="com.cannontech.multispeak.service.impl.MR_CBImpl">
  	<property name="multispeakFuncs" ref="multispeakFuncs"/>
    <property name="multispeakDao" ref="multispeakDao"/>
  	<property name="multispeak" ref="multispeak"/>
  	<property name="mspRawPointHistoryDao" ref="mspRawPointHistoryDao"/>
  	<property name="porterConnection" ref="porterConnection"/>
  </bean>
  <bean id="cd_cbImpl" class="com.cannontech.multispeak.service.impl.CD_CBImpl">
  	<property name="multispeakFuncs" ref="multispeakFuncs"/>
    <property name="multispeakDao" ref="multispeakDao"/>
  	<property name="multispeak" ref="multispeak"/>
  </bean>
  <bean id="mr_eaImpl" class="com.cannontech.multispeak.service.impl.MR_EAImpl">
  	<property name="multispeakFuncs" ref="multispeakFuncs"/>
    <property name="dynamicDataSource" ref="dynamicDataSource" />
    <property name="paoDao" ref="paoDao"/>
    <property name="pointDao" ref="pointDao"/>
  </bean>
  <bean id="mr_oa" class="com.cannontech.multispeak.service.impl.MR_OAImpl">
  </bean>
    <bean id="od_oaImpl" class="com.cannontech.multispeak.service.impl.OD_OAImpl">
  	<property name="multispeakFuncs" ref="multispeakFuncs"/>
  	<property name="multispeak" ref="multispeak"/>
  </bean>

  <bean id="multispeakFuncs" class="com.cannontech.multispeak.client.MultispeakFuncs">
    <property name="multispeakDao" ref="multispeakDao"></property>
    <property name="paoDao" ref="paoDao"/>
    <property name="deviceDao" ref="deviceDao"/>
    <property name="roleDao" ref="roleDao"/>
  </bean>
  
  <bean id="multispeak" class="com.cannontech.multispeak.client.Multispeak" init-method="initialize">
  	<property name="multispeakFuncs" ref="multispeakFuncs"/>
  	<property name="porterConnection" ref="porterConnection"/>
    <property name="multispeakDao" ref="multispeakDao"/>
    <property name="dbPersistentDao" ref="dbPersistentDao"/>
    <property name="paoDao" ref="paoDao"/>
    <property name="deviceDao" ref="deviceDao"/>
  </bean>
   
  
  <bean id="multispeakDao" class="com.cannontech.multispeak.dao.impl.MultispeakDaoImpl">
    <property name="jdbcOps" ref="jdbcTemplate"/> 
    <property name="transactionTemplate" ref="transactionTemplate"/> 
    <property name="nextValueHelper" ref="nextValueHelper"/>  
  </bean>
  
  <bean id="mspRawPointHistoryDao" class="com.cannontech.multispeak.dao.impl.RawPointHistoryDaoImpl">
  </bean>

  <bean id="mspCustomerInfoDao" class="com.cannontech.multispeak.dao.impl.MspCustomerInfoDaoImpl">
  	<property name="multispeakFuncs" ref="multispeakFuncs"/>
    <property name="multispeakDao" ref="multispeakDao"/>
  </bean>
  
 </beans>
