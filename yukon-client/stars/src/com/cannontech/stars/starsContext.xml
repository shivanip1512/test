<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd">

    <!-- Loads all @Components from the specified packages. -->
    <context:component-scan base-package="com.cannontech.stars.dr" />

    <bean id="simpleCollectionFactory" class="com.cannontech.stars.web.collection.SimpleCollectionFactory"/>

    <bean id="abstractFilter" class="com.cannontech.stars.util.filter.AbstractFilter" abstract="true"/>

    <bean id="inventoryFilter" class="com.cannontech.stars.util.filter.InventoryFilter"
          parent="abstractFilter">
          <property name="batchSize" value="500"/>
    </bean>          
          
    <bean id="workOrderFilter" class="com.cannontech.stars.util.filter.WorkOrderFilter"
          parent="abstractFilter">
          <property name="batchSize" value="500"/>
    </bean>      

    <bean id="abstractInventoryFilterByProducer" class="com.cannontech.stars.util.filter.filterby.inventory.AbstractInventoryFilterByProducer"
          abstract="true"/>
    
    <bean id="abstractWorkOrderFilterByProducer" class="com.cannontech.stars.util.filter.filterby.workorder.AbstractWorkOrderFilterByProducer"
          abstract="true"/>

    <bean id="filterByFactory" class="com.cannontech.stars.util.filter.filterby.FilterByFactory">
        <property name="filterByProducers">
            <list>
                <bean class="com.cannontech.stars.util.filter.filterby.inventory.DeviceTypeFilterByProducer" 
                      parent="abstractInventoryFilterByProducer"/>
                      
                <bean class="com.cannontech.stars.util.filter.filterby.inventory.PostalCodesFilterByProducer" 
                      parent="abstractInventoryFilterByProducer"/>
                
                <bean class="com.cannontech.stars.util.filter.filterby.inventory.ServiceCompanyFilterByProducer" 
                      parent="abstractInventoryFilterByProducer"/>
                
                <bean class="com.cannontech.stars.util.filter.filterby.inventory.WarehouseFilterByProducer" 
                      parent="abstractInventoryFilterByProducer"/>
                
                <bean class="com.cannontech.stars.util.filter.filterby.inventory.SerialNumberRangeMinFilterByProducer" 
                      parent="abstractInventoryFilterByProducer"/>
                
                <bean class="com.cannontech.stars.util.filter.filterby.inventory.SerialNumberRangeMaxFilterByProducer" 
                      parent="abstractInventoryFilterByProducer"/>
                
                <bean class="com.cannontech.stars.util.filter.filterby.inventory.ApplianceTypeFilterByProducer" 
                      parent="abstractInventoryFilterByProducer"/>
                
                <bean class="com.cannontech.stars.util.filter.filterby.inventory.CustomerTypeFilterByProducer" 
                      parent="abstractInventoryFilterByProducer"/>
                
                <bean class="com.cannontech.stars.util.filter.filterby.inventory.DeviceStatusFilterByProducer" 
                      parent="abstractInventoryFilterByProducer"/>
                
                <bean class="com.cannontech.stars.util.filter.filterby.inventory.MemberFilterByProducer" 
                      parent="abstractInventoryFilterByProducer"/>
                
                <bean class="com.cannontech.stars.util.filter.filterby.workorder.ServiceCompanyFilterByProducer" 
                      parent="abstractWorkOrderFilterByProducer"/>
                
                <bean class="com.cannontech.stars.util.filter.filterby.workorder.ServiceTypeFilterByProducer" 
                      parent="abstractWorkOrderFilterByProducer"/>
                
                <bean class="com.cannontech.stars.util.filter.filterby.workorder.PostalCodesFilterByProducer" 
                      parent="abstractWorkOrderFilterByProducer"/>

                <bean class="com.cannontech.stars.util.filter.filterby.workorder.CustomerTypeFilterByProducer" 
                      parent="abstractWorkOrderFilterByProducer"/>
                      
                <bean class="com.cannontech.stars.util.filter.filterby.workorder.WorkOrderStatusFilterByProducer"
                      parent="abstractWorkOrderFilterByProducer"/>
            </list>
        </property>
    </bean>

    <bean id="liteStarsEnergyCompanyFactory" class="com.cannontech.database.data.lite.stars.LiteStarsEnergyCompanyFactory"/>

    <bean id="starsDatabaseCache"
        class="com.cannontech.database.cache.StarsDatabaseCache"
        init-method="init">
        <property name="asyncDynamicDataSource" ref="asyncDynamicDataSource" />
        <property name="starsCustAccountInformationDao" ref="starsCustAccountInformationDao"/>
    </bean>

    <bean id="accountCheckerService" class="com.cannontech.stars.core.service.impl.AccountCheckerServiceImpl"/>
    
    <bean id="updatableAccountConverter" class="com.cannontech.stars.service.impl.UpdatableAccountConverterImpl"/>

	<bean id="starsControllableDeviceDTOConverter" class="com.cannontech.stars.service.impl.StarsControllableDeviceDTOConverterImpl"/>

    <bean id="deviceActivationService"
        class="com.cannontech.stars.dr.hardware.service.impl.DeviceActivationServiceImpl">
        <property name="customerAccountDao" ref="customerAccountDao" />
        <property name="inventoryBaseDao" ref="inventoryBaseDao" />
        <property name="hardwareBaseDao" ref="hardwareBaseDao" />
        <property name="customerEventBaseDao" ref="customerEventBaseDao"/>
        <property name="cacheService" ref="starsCacheService"/>
    </bean>

    <bean id="deviceVerificationService" class="com.cannontech.stars.dr.hardware.service.impl.DeviceVerificationServiceImpl">
        <property name="hardwareBaseDao" ref="hardwareBaseDao" />
        <property name="porterConnection" ref="porterConnection"/>
    </bean>

    <bean id="enrollmentService" class="com.cannontech.stars.dr.enrollment.service.impl.EnrollmentHelperServiceImpl"/>

	<bean id="lmHardwareControlInformationService" class="com.cannontech.stars.dr.hardware.service.impl.LMHardwareControlInformationServiceImpl">
		<property name="lmHardwareControlGroupDao" ref="lmHardwareControlGroupDao"/>
	</bean>
	
	<bean id="lmHardwareControlGroupDao"
        class="com.cannontech.stars.dr.hardware.dao.impl.LMHardwareControlGroupDaoImpl">
        <property name="nextValueHelper" ref="nextValueHelper" />
        <property name="simpleJdbcTemplate" ref="simpleJdbcTemplate" />
    </bean>
	
    <bean id="customerAccountDao"
        class="com.cannontech.stars.dr.account.dao.impl.CustomerAccountDaoImpl">
        <property name="nextValueHelper" ref="nextValueHelper" />
        <property name="simpleJdbcTemplate" ref="simpleJdbcTemplate" />
        <property name="starsDatabaseCache" ref="starsDatabaseCache"/>
    </bean>

    <bean id="starsSearchDao" class="com.cannontech.stars.core.dao.impl.StarsSearchDaoImpl">
        <property name="jdbcTemplate" ref="simpleJdbcTemplate" />
        <property name="ecMappingDao" ref="ecMappingDao" />
        <property name="starsInventoryBaseDao" ref="starsInventoryBaseDao" />
    </bean>

    <bean id="starsCustAccountInformationDao" class="com.cannontech.stars.core.dao.impl.StarsCustAccountInformationDaoImpl"/>

    <bean id="starsApplianceDao" class="com.cannontech.stars.core.dao.impl.StarsApplianceDaoImpl"/>

    <bean id="lmProgramWebPublishingDao" class="com.cannontech.stars.core.dao.impl.LMProgramWebPublishingDaoImpl"/>

    <bean id="starsInventoryBaseDao" class="com.cannontech.stars.core.dao.impl.StarsInventoryBaseDaoImpl"/>

    <bean id="starsControllableDeviceHelper" class="com.cannontech.stars.ws.helperImpl.StarsControllableDeviceHelperImpl"/>
            
    <bean id="starsInventoryBaseService" class="com.cannontech.stars.core.service.impl.StarsInventoryBaseServiceImpl"/>
    
    <bean id="starsTwoWayLcrYukonDeviceAssignmentService" class="com.cannontech.stars.core.service.impl.StarsTwoWayLcrYukonDeviceAssignmentServiceImpl"/>

    <bean id="staticLoadGroupMappingDao" class="com.cannontech.stars.dr.hardware.dao.impl.StaticLoadGroupMappingDaoImpl"/>
    
    <bean id="starsWorkOrderBaseDao" class="com.cannontech.stars.core.dao.impl.StarsWorkOrderBaseDaoImpl"/>

    <bean id="accountSiteDao" class="com.cannontech.stars.dr.account.dao.impl.AccountSiteDaoImpl"/>
    
    <bean id="ecMappingDao" class="com.cannontech.stars.core.dao.impl.ECMappingDaoImpl"/>

    <bean id="applianceDao" class="com.cannontech.stars.dr.appliance.dao.impl.ApplianceDaoImpl"/>

    <bean id="applianceCategoryDao" class="com.cannontech.stars.dr.appliance.dao.impl.ApplianceCategoryDaoImpl"/>

    <bean id="starsProgramDao" class="com.cannontech.stars.dr.program.dao.impl.ProgramDaoImpl"/>
    
    <bean id="starsProgramService" class="com.cannontech.stars.dr.program.service.impl.ProgramServiceImpl"/>

    <bean id="starsProgramEnrollmentService" class="com.cannontech.stars.dr.program.service.impl.ProgramEnrollmentServiceImpl"/>

	<bean id="inventoryDao" class="com.cannontech.stars.dr.hardware.dao.impl.InventoryDaoImpl" />

    <bean id="customerEventDao" class="com.cannontech.stars.dr.thermostat.dao.impl.CustomerEventDaoImpl" />

    <bean id="thermostatScheduleDao" class="com.cannontech.stars.dr.thermostat.dao.impl.ThermostatScheduleDaoImpl" />

    <bean id="thermostatService" class="com.cannontech.stars.dr.thermostat.service.impl.ThermostatServiceImpl" />

    <bean id="enrollmentDao" class="com.cannontech.stars.dr.enrollment.dao.impl.EnrollmentDaoImpl"/>
    
    <bean id="optOutService" class="com.cannontech.stars.dr.optout.service.impl.OptOutServiceImpl"/>

    <bean id="optOutStatusService" class="com.cannontech.stars.dr.optout.service.impl.OptOutStatusServiceImpl"/>

    <bean id="optOutEventDao" class="com.cannontech.stars.dr.optout.dao.impl.OptOutEventDaoImpl"/>

    <bean id="optOutAdditionalDao" class="com.cannontech.stars.dr.optout.dao.impl.OptOutAdditionalDaoImpl"/>

    <bean id="optOutTemporaryOverrideDao" class="com.cannontech.stars.dr.optout.dao.impl.OptOutTemporaryOverrideDaoImpl"/>

    <bean id="optOutNotificationService" class="com.cannontech.stars.dr.optout.service.impl.OptOutNotificationServiceImpl"/>
    
    <bean id="callReportDao" class="com.cannontech.stars.core.dao.impl.CallReportDaoImpl"/>
    
    <bean id="siteInformationDao" class="com.cannontech.stars.core.dao.impl.SiteInformationDaoImpl"/>
    
    <bean id="eventAccountDao" class="com.cannontech.stars.dr.event.dao.impl.EventAccountDaoImpl"/>
    
    <bean id="lmProgramEventDao" class="com.cannontech.stars.dr.event.dao.impl.LMProgramEventDaoImpl"/>
    
    <bean id="lmHardwareConfigurationDao" class="com.cannontech.stars.dr.hardware.dao.impl.LMHardwareConfigurationDaoImpl"/>
    
    <bean id="lmConfigurationBaseDao" class="com.cannontech.stars.dr.hardware.dao.impl.LMConfigurationBaseDaoImpl"/>
        
    <bean id="applianceAndProgramDao"
        class="com.cannontech.stars.dr.account.dao.impl.ApplianceAndProgramDaoImpl">
        <property name="simpleJdbcTemplate" ref="simpleJdbcTemplate" />
    </bean>
    
    <bean id="accountService" class="com.cannontech.stars.dr.account.service.impl.AccountServiceImpl"/>
    
    <bean id="accountServiceHelper" class="com.cannontech.stars.dr.account.service.AccountServiceHelper"/>

    <bean id="hardwareBaseDao" class="com.cannontech.stars.dr.hardware.dao.impl.LMHardwareBaseDaoImpl"/>

    <bean id="inventoryBaseDao" class="com.cannontech.stars.dr.hardware.dao.impl.InventoryBaseDaoImpl"/>
    
    <bean id="eventBaseDao" class="com.cannontech.stars.dr.event.dao.impl.EventBaseDaoImpl"/>
        
    <bean id="eventInventoryDao" class="com.cannontech.stars.dr.event.dao.impl.EventInventoryDaoImpl"/>
            
    <bean id="customerEventBaseDao" class="com.cannontech.stars.dr.event.dao.impl.LMCustomerEventBaseDaoImpl">
        <property name="nextValueHelper" ref="nextValueHelper" />
        <property name="simpleJdbcTemplate" ref="simpleJdbcTemplate"/>
    </bean>
    
    <bean id="hardwareEventDao" class="com.cannontech.stars.dr.event.dao.impl.LMHardwareEventDaoImpl"/>
    
    <bean id="eventWorkOrderDao" class="com.cannontech.stars.dr.event.dao.impl.EventWorkOrderDaoImpl">
        <property name="simpleJdbcTemplate" ref="simpleJdbcTemplate"/>
    </bean>
    
    <bean id="starsCacheService" class="com.cannontech.stars.core.service.impl.StarsCacheServiceImpl">
        <property name="starsInventoryBaseDao" ref="starsInventoryBaseDao" />
    </bean>
    
    <bean id="controlHistoryDao" class="com.cannontech.stars.dr.controlhistory.dao.impl.ControlHistoryDaoImpl"/>
    
    <bean id="controlHistoryEventDao" class="com.cannontech.stars.dr.controlhistory.dao.impl.ControlHistoryEventDaoImpl"/>

    <bean id="controlHistoryService" class="com.cannontech.stars.dr.controlhistory.service.impl.ControlHistoryServiceImpl"/>
    
    <!-- Import Customer Accounts/Hardware Import Job -->    
    <bean id="importCustAccountsSchedulerJob"
        class="com.cannontech.jobs.support.SimpleYukonJobDefinition">
        <property name="taskName">
            <idref local="importCustAccountsSchedulerTask" />
        </property>
        <property name="title" value="Import Customer Account/Hardware Job" />
        <property name="inputs">
            <bean class="com.cannontech.web.input.InputRoot">
                <property name="inputList">
                    <list>
                        <bean
                            class="com.cannontech.web.input.InputBase">
                            <property name="field" value="energyCompany" />
                            <property name="displayName"
                                value="Energy Company" />
                            <property name="type">
                                <bean
                                    class="com.cannontech.web.input.type.StringType" />
                            </property>
                        </bean>
                        <bean
                            class="com.cannontech.web.input.InputBase">
                            <property name="field" value="email" />
                            <property name="displayName"
                                value="Email Address" />
                            <property name="type">
                                <bean
                                    class="com.cannontech.web.input.type.StringType" />
                            </property>
                        </bean>
                    </list>
                </property>
            </bean>
        </property>
    </bean>

    <!--  Import Customer Account/Hardware Task -->
    <bean id="importCustAccountsSchedulerTask"
        class="com.cannontech.stars.util.task.ImportCustAccountsSchedulerTask"
        scope="prototype" />

    <!-- Opt Out Job -->    
    <bean id="optOutSchedulerJob"
        class="com.cannontech.jobs.support.SimpleYukonJobDefinition">
        <property name="taskName">
            <idref local="optOutTask" />
        </property>
        <property name="title" value="Opt Out Job" />
    </bean>
    
    <!--  Opt Out Task -->
    <bean id="optOutTask" class="com.cannontech.stars.util.task.OptOutTask" scope="prototype">
        <property name="customerAccountDao" ref="customerAccountDao"/>
        <property name="ecMappingDao" ref="ecMappingDao"/>
        <property name="enrollmentDao" ref="enrollmentDao"/>
        <property name="optOutEventDao" ref="optOutEventDao"/>
        <property name="optOutService" ref="optOutService"/>
        <property name="starsInventoryBaseDao" ref="starsInventoryBaseDao"/>
    </bean>
    
    <bean 
        id="commandRequestHardwareExecutor" 
        class="com.cannontech.stars.dr.hardware.service.impl.CommandRequestHardwareExecutorImpl">
    </bean>
    
</beans>