
<%
if( lmSession.getResponseProgs() == null )
{
    String redirect = ServletUtil.createSafeRedirectUrl(request, lmSession.DEF_REDIRECT);
    CTILogger.warn( 
		"No server response for sync message found, redirecting request to: " + redirect); 

	response.sendRedirect(redirect);
	return;
}

boolean isOverrideAllowed = lmSession.isOverrideAllowed(
	(LiteYukonUser)session.getAttribute(ServletUtil.ATT_YUKON_USER) );

%>         

<html>
<head>
<title>Energy Services Operations Center</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" href="../WebConfig/yukon/CannonStyle.css" type="text/css">
<link rel="stylesheet" href="css/lm.css" type="text/css">
</head>


<body class="Background" leftmargin="0" topmargin="0" onload="reload();" >

<table width="760" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td>
      <table width="760" border="0" cellspacing="0" cellpadding="0" align="center">
        <tr> 
          <td width="102" height="102" background="images/LoadImage.jpg">&nbsp;</td>
		  <td width="1" bgcolor="#000000"><img src="images/VerticalRule.gif" width="1"></td>
          <td valign="bottom" height="102"> 
            <table width="656" cellspacing="0" cellpadding="0" border="0">
              <tr> 
                <td id="header" colspan="4" height="74" background="../WebConfig/<cti:getProperty propertyid="<%= WebClientRole.HEADER_LOGO%>" defaultvalue="images/Header.gif"/>">&nbsp;</td>
              </tr>
              <tr>
                <td width="353" height = "28" class="PageHeader">&nbsp;&nbsp;&nbsp; 
                  Load Management
                </td>
				
                <td width="235" valign="middle">&nbsp;</td>
                <td width="58" valign="middle"> 
                    <div align="center"><span class="MainText"><a href="../operator/Operations.jsp" class="Link3">Home</a></span></div>
                  </td>
                <td width="57" valign="middle"> 
                  <div align="left"><span class="MainText"><a href="<%=request.getContextPath()%>/servlet/LoginController?ACTION=LOGOUT" class="Link3">Log Off</a>&nbsp;</span></div>
                </td>
              </tr>
            </table>
          </td>
		  <td width="1" height="102" bgcolor="#000000"><img src="images/VerticalRule.gif" width="1"></td>
          </tr>
      </table>
    </td>
  </tr>
  <tr>
    <td>
      <table width="760" border="0" cellspacing="0" cellpadding="0" align="center">
        <tr> 
          <td width="759" valign="top" bgcolor="#000000"> 
		  <td width="1" bgcolor="#000000" height="1"></td>
		</tr>
        <tr> 
          <td width="759" valign="middle" bgcolor="#FFFFFF">
			<table width="740" border="0" cellspacing="0" cellpadding="0" align="center" >
              <tr>
			  <td>
				<div align="center" class="boldMsg"><br>
				  Results of Constraint Check<br>
				  Select the constraints you would like to override, or
				  allow the constraints to be enforced
				</div>
			  </td>
			  			  
              </tr>
            </table>

	<form name="cmdForm" method="post" action="<%=request.getContextPath()%>/servlet/LCConnectionServlet" >
	<input type="hidden" name="resendSyncMsgs" value="true" >
	<input type="hidden" name="redirectURL" value="<%= ServletUtil.tweakRequestURI(request, "quickrefresh", "true") %>" >
            <table width="740" border="0" cellspacing="0" cellpadding="0" align="center">
              <tr>
                <td width="740" valign="top" class="MainText"> 
                  <table width="744" border="1" align="center" cellpadding="2" cellspacing="0">
                    <tr valign="top" class="HeaderCell"> 
					  <td width="168">
					  	<div align="left">
						<input id="allChksId" type="checkbox" name="allChks" value="true"
							<%=isOverrideAllowed ? "" : "DISABLED"%>
							onClick='checkAll(allChksId, document.getElementsByName("dblarray1"));'>
						Override All
						</div>
  					  </td>
                      <td width="316"><div align="center"><%= ConstraintTableModel.COL_NAMES[ConstraintTableModel.COL_VIOLATION]%></div></td>					  
                    </tr>
<%
	ResponseProg[] respProgs = lmSession.getResponseProgs();
	for( int i = 0; respProgs != null && i < respProgs.length; i++ )
	{
		ResponseProg prg = respProgs[i];
%>
                    <tr valign="top">
                      <td width="168" class="TableCell" align="left">
						<input type="checkbox" name="dblarray1"
							<%=isOverrideAllowed ? "" : "DISABLED"%>						
							value="<%=prg.getLmProgramBase().getYukonID()%>" >
						<%= prg.getLmProgramBase().getYukonName() %>
					  </td>					  
					  <td width="316" class="TableCell" align="left">
					  <%= prg.getViolationsAsString() %>
					  </td>					  
                    </tr>
<%
	}
%>
                  </table>
              </tr>
              <tr>
                <td width="740" height="20"></td>
			  </tr>
              <tr>
                <td width="740" valign="middle" class="MainText"> 
				<div align="center">
					<input type="submit" name="submitChoice" value="Resubmit" class="defButton">
					<input type="submit" name="submitChoice" value="Cancel" class="defButton" >
				</div>
				
				</td>
			  </tr>			  
		</table>
	</form>


		   <br>
		</tr>
	</table>

          </td>
		  <td width="1" bgcolor="#000000"><img src="images/VerticalRule.gif" width="1"></td>
    </tr>
      </table>

</body>
</html>
