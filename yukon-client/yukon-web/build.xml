<?xml version="1.0" ?>
<project name="yukon web" default="all">

	<property file="../build/build.properties" />
	
	<target name="all" depends="clean,build" />
	
	<target name="build">
        <mkdir dir="build"/>
        <copy todir="build">
            <fileset dir=".">
                <exclude name="build" />
                <exclude name="**/CVS" />
                <exclude name="WEB-INF/web.xml" />
            </fileset>
        </copy>
        
        <war destfile="${yukon.lib}/yukon-web.war" basedir="build"
            webxml="WEB-INF/web.xml"
            duplicate="preserve">
        </war>
<!--
		<war destfile="${yukon.lib}/yukon-web.war" basedir="."
			webxml="WEB-INF/web.xml"
			duplicate="preserve">

			<exclude name="work/**" />
			<exclude name="WEB-INF/lib/*.properties" />            
			
			<lib dir="../lib">
				<include name="**/*.jar" />
			</lib>
			
			<classes dir="WEB-INF/lib">
				<include name="**/*.properties" />
			</classes>
		</war>
-->        
	</target>
   	
	<target name="clean">
		<delete file="${yukon.lib}/yukon-web.war" />
        <delete dir="build"/>
	</target>
	
   <target name = "copywar" depends="warme, copy"/>
   
   <target name="warme">
    <war destfile="yukon-web.war" webxml="WEB-INF/web.xml">
        <fileset dir=".">
            <exclude name="yukon.war"/>
            <exclude name="/work/**"/>
            <exclude name="\cvs\*"/>
            <exclude name="/demos/**"/>
            <exclude name="WEB-INF/web.xml"/>
        </fileset>
        <lib dir="..\lib">
            <exclude name="*.properties"/>
            <exclude name="j2ee.jar"/>
        </lib>
		<classes dir="WEB-INF/lib">
			<include name="**/*.properties" />
		</classes>
        
    </war>
   </target>

   <target name = "copy">
       <copy todir="c:/Tomcat/webapps" preservelastmodified="yes">
           <fileset dir=".">
               <include name="**/*.war"/>
           </fileset>
       </copy>
   </target>
	
</project>