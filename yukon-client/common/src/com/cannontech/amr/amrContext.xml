<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>
    <bean id="deviceReadJobLogDao" class="com.cannontech.amr.deviceread.dao.impl.DeviceReadJobLogDaoImpl">
      <property name="template" ref="simpleJdbcTemplate"/>
    </bean>

    <bean id="deviceErrorTranslator" class="com.cannontech.amr.errors.dao.impl.DeviceErrorTranslatorDaoImpl" 
          singleton="true" init-method="initialize">
	  	<property name="errorDefinitions">
	  		<value type="java.io.InputStream">
	  			com/cannontech/amr/errors/dao/impl/error-code.xml
	  		</value>
	  	</property>
	</bean>
	
	<bean id="csrService" class="com.cannontech.amr.csr.service.impl.CsrServiceImpl">
		<property name="csrSearchDao" ref="csrSearchDao" />
	</bean>
	
	<bean id="csrSearchDao" class="com.cannontech.amr.csr.dao.impl.CsrSearchDaoImpl">
		<property name="jdbcTemplate" ref="simpleJdbcTemplate"/>
		<property name="meterRowMapper" ref="extendedMeterRowMapper"/>
	</bean>
    
    <bean id="meterDao" class="com.cannontech.amr.meter.dao.impl.MeterDaoImpl">
	  	<property name="simpleJdbcTemplate" ref="simpleJdbcTemplate"/>
	  	<property name="meterRowMapper" ref="meterRowMapper"/>
	  	<property name="roleDao" ref="roleDao"/>
	    <property name="jdbcOps" ref="jdbcTemplate"/>
	</bean>
    
    <bean id="meterRowMapper" class="com.cannontech.amr.meter.dao.impl.MeterRowMapper">
        <constructor-arg ref="paoGroupsWrapper"/>
    </bean>
    
    <bean id="extendedMeterRowMapper" class="com.cannontech.amr.csr.dao.impl.ExtendedMeterRowMapper">
        <constructor-arg ref="paoGroupsWrapper"/>
    </bean>
    
    <bean id="meterReadService" class="com.cannontech.amr.deviceread.dao.impl.MeterReadServiceImpl">
        <property name="deviceDefinitionDao" ref="deviceDefinitionDao"/>
        <property name="commandExecutor" ref="commandRequestExecutor"/>
    </bean>
    
</beans>

