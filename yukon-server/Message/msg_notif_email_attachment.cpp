
#pragma warning( disable : 4786)

/*-----------------------------------------------------------------------------*
*
* File:   msg_notif_email_attachment
*
* Date:   1/22/2004
*
* Author: Eric Schmit
*
* PVCS KEYWORDS:
* ARCHIVE      :  $Archive$
* REVISION     :  $Revision: 1.1 $
* DATE         :  $Date: 2004/03/02 21:13:51 $
*
* Copyright (c) 1999, 2000, 2001, 2002 Cannon Technologies Inc. All rights reserved.
*-----------------------------------------------------------------------------*/

#include "msg_notif_email_attachment.h"

RWDEFINE_COLLECTABLE( CtiNotifEmailAttachmentMsg, NOTIF_EMAIL_ATTCH_MSG_ID );

//=====================================================================================================================
//=====================================================================================================================

CtiNotifEmailAttachmentMsg::CtiNotifEmailAttachmentMsg( RWCString fileName, char *fileGuts )
{
   setFileName( fileName );
   setContents( fileGuts );
}

//=====================================================================================================================
//=====================================================================================================================

CtiNotifEmailAttachmentMsg::CtiNotifEmailAttachmentMsg( RWCString fileName )
{
   setFileName( fileName );
   readFile( fileName );
}

//=====================================================================================================================
//=====================================================================================================================

CtiNotifEmailAttachmentMsg::CtiNotifEmailAttachmentMsg()
{
}

//=====================================================================================================================
//=====================================================================================================================

CtiNotifEmailAttachmentMsg::~CtiNotifEmailAttachmentMsg()
{
   if( _contents != NULL )
   {
      delete [] _contents;
      _contents = NULL;
   }
}

//=====================================================================================================================
//=====================================================================================================================

void CtiNotifEmailAttachmentMsg::readFile( RWCString name )
{
   int index = 0;
/*
   ifstream fileAttachment( name );

   while( !fileAttachment.eof() )
   {
//      index
   }*/
}

//=====================================================================================================================
//=====================================================================================================================

void CtiNotifEmailAttachmentMsg::saveGuts( RWvostream &aStream ) const
{
   CtiMessage::saveGuts( aStream );

   aStream << _fileName
            << _contents;
}
   
//=====================================================================================================================
//=====================================================================================================================

void CtiNotifEmailAttachmentMsg::restoreGuts( RWvistream& aStream )
{
   CtiMessage::restoreGuts( aStream );

   aStream >> _fileName
            >> _contents;
}

//=====================================================================================================================
//=====================================================================================================================

RWCString CtiNotifEmailAttachmentMsg::getFileName( void )
{
   return( _fileName );
}

//=====================================================================================================================
//=====================================================================================================================

void CtiNotifEmailAttachmentMsg::setFileName( RWCString name )
{
   _fileName = name;
}

//=====================================================================================================================
//=====================================================================================================================

int CtiNotifEmailAttachmentMsg::getLength( void )
{
   return( _length );
}

//=====================================================================================================================
//=====================================================================================================================

void CtiNotifEmailAttachmentMsg::setLength( int len )
{
   _length = len;
}

//=====================================================================================================================
//=====================================================================================================================
   
void CtiNotifEmailAttachmentMsg::setContents( char *guts )
{
   _contents = new char[getLength()];

   memcpy( _contents, guts, getLength() );
}

//=====================================================================================================================
//=====================================================================================================================
   
char* CtiNotifEmailAttachmentMsg::getContents( void )
{
   return( _contents );
}

//=====================================================================================================================
// Return a new'ed copy of this message!
//=====================================================================================================================

CtiMessage* CtiNotifEmailAttachmentMsg::replicateMessage() const
{
   CtiNotifEmailAttachmentMsg *ret = CTIDBG_new CtiNotifEmailAttachmentMsg(*this);

   return( (CtiMessage*)ret );
}
   

