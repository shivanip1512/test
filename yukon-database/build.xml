<?xml version="1.0" ?>
<project name="WriteToFiles" default="build">

    <target name="build" >
        <antcall target="version_db_files"/>
    </target>

    <target name="init">
        <!-- Test here to see if we are an official build so developers can build locally -->
        <property environment="env"/>

        <!-- Get todays date since we need it in the insert -->
        <tstamp>
            <format property="today" pattern="dd-MMM-yyyy" />
        </tstamp>

    </target>

    <target name="version_db_files" depends="init" >
        <!-- set up some local variables -->
        <property name="sql.insert" 
            value="insert into CTIDatabase values('${env.yukon_major_revision}.${env.yukon_minor_revision}', 'Ryan', '${today}', 'Latest Update', ${env.yukon_build_revision} );"/>

        <property name="sql.filename" 
            value="${env.yukon_major_revision}.${env.yukon_minor_revision}_${env.yukon_build_revision}.sql"/>

        <!-- Add the yukon version to the DBUpdate and Creation script files -->
        <replace file="DBUpdates/sqlserver/${sql.filename}" token="/* __YUKON_VERSION__ */" value="${sql.insert}"/>
        <replace file="DBUpdates/oracle/${sql.filename}" token="/* __YUKON_VERSION__ */" value="${sql.insert}"/>

        <replace file="CreationScripts/SqlServerTableCreation.sql" token="/* __YUKON_VERSION__ */" value="${sql.insert}"/>
        <replace file="CreationScripts/OracleTableCreation.sql" token="/* __YUKON_VERSION__ */" value="${sql.insert}"/>
    </target>
   
</project>
