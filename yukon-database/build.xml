<?xml version="1.0" ?>
<project name="WriteToFiles" default="build">

    <target name="build" >
        <antcall target="version_db_files"/>
    </target>

    <target name="init">
        <!-- Get todays date since we need it in the insert -->
        <tstamp>
            <format property="today" pattern="dd-MMM-yyyy" />
        </tstamp>

    </target>

    <target name="version_db_files" depends="init" >
        <!-- set up some local variables -->
        <property name="sql.insert" 
            value="insert into CTIDatabase values('${yukon.major}.${yukon.minor}', 'Jon', '${today}', 'Latest Update', ${yukon.revision} );"/>

        <property name="sql.filename" 
            value="${yukon.major}.${yukon.minor}_${yukon.revision}.sql"/>

        <!-- Add the yukon version to the DBUpdate and Creation script files -->
        <replace file="DBUpdates/sqlserver/${sql.filename}" token="/* __YUKON_VERSION__ */" value="${sql.insert}"/>
        <replace file="DBUpdates/oracle/${sql.filename}" token="/* __YUKON_VERSION__ */" value="${sql.insert}"/>

        <replace file="CreationScripts/SqlServerTableCreation.sql" token="/* __YUKON_VERSION__ */" value="${sql.insert}"/>
        <replace file="CreationScripts/OracleTableCreation.sql" token="/* __YUKON_VERSION__ */" value="${sql.insert}"/>
    </target>
   
</project>
